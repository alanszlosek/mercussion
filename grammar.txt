score: details instruments | instruments

details: detail string details

detail: "author:" | "tempo:" | "timesignature:" | "title:"

instruments: instrument instruments | instrument

instrument: "snare:" snareMusic | "bass:" bassTenorMusic | "tenor:" bassTenorMusic | "cymbal:" cymbalMusic


// snare
snareMusic: snareMeasure "|" snareMusic | snareMeasure

snareMeasure: snareBeat space* snareMeasure | snareBeat

// can put in simultaneous here when need to for cymbal stuff
// how deal with simultaneous and sticking?
snareBeat: snareNotes ':' sticking | snareNotes
snareNotes: snareNote snareNotes | snareNote

// fuck tuplets for now
// snareBeat2: ']' snareBeat | ']' | snareNote snareBeat2 | snareNote

snareNote: snareModifers snareSurface | snareSurface

snareModifiers: snareModifier snareModifiers | snareModifier

snareModifier: dynamicModifier | [,-=]

snareSurface: [hHxXrRbBsSgG] | rest


// bass and tenors
bassTenorMusic: bassTenorMeasure "|" bassTenorMusic | bassTenorMeasure

bassTenorMeasure: bassTenorBeat space* bassTenorMeasure | bassTenorBeat

// gar ... get the combos right is a bitch
bassTenorBeat: "(" bassTenorSimultaneousNotes ")" bassTenorBeat | "[" bassTenorBeat2 "]" bassTenorBeat |
	"{" bassTenorSticking "}" bassTenorSurface more? | bassTenorNote bassTenorBeat | bassTenorNote
bassTenorBeat2: "(" bassTenorSimultaneousNotes ")" bassTenorBeat | "{" bassTenorSticking "}" bassTenorSurface more? | bassTenorNote bassTenorBeat | bassTenorNote

bassTenorSimultaneousNotes: bassTenorNote bassTenorSimultaneousNotes | bassTenorNote

bassTenorSticking: [rl] bassTenorSticking | [rl]

bassTenorNote: bassTenorModifers bassTenorSurface | bassTenorSurface

bassTenorModifiers: bassTenorModifier bassTenorModifiers | bassTenorModifier

bassTenorModifier: dynamicModifier | [,-=*]

bassTenorSurface: [aAbBcCdDeEuU] | '.'


dynamicModifier: [PMFG<>]

stickingModifier: [rl]

rest: '.'


tuplet_begin: "["

tuplet_end: "]"

string: [a-zA-Z0-9_-]+ | '"' .* '"'
